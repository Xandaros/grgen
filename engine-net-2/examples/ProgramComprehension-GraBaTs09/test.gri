rule WhileStatement_to_IfStatement_then {
	whilee:dom_WhileStatement;
	whilee -e:dom_WhileStatement_expression-> expr:dom_Expression;
	whilee -f:dom_WhileStatement_body-> then:dom_Statement;

	modify {
		iff:dom_IfStatement<whilee>;
		-:dom_IfStatement_expression<e>->;
		-:dom_IfStatement_thenStatement<f>->;
		iff -:dom_IfStatement_elseStatement-> :dom_EmptyStatement;
	}
}

rule WhileStatement_to_IfStatement_else {
	whilee:dom_WhileStatement;
	whilee -e:dom_WhileStatement_expression-> expr:dom_Expression;
	whilee -f:dom_WhileStatement_body-> then:dom_Statement;

	modify {
		iff:dom_IfStatement<whilee>;
		-:dom_IfStatement_expression<e>->;
		-:dom_IfStatement_elseStatement<f>->;
		iff -:dom_IfStatement_thenStatement-> :dom_EmptyStatement;
	}
}

rule rename_prod_2_k {
	id:dom_SimpleName;

	if { id._identifier == "prod"; }

	modify {
		eval {
			id._identifier = "k";
		}
	}
}
